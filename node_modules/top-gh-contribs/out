
> top-gh-contribs@2.0.2 test /Users/jtw/src/top-gh-contribs
> mocha --check-leaks



  top-gh-contribs
    ✓ retry delay should be an exponential backoff in milliseconds
    getPagination
      1) should follow pagination links
    getTopContributors
      ✓ should return all contributors if count is not provided not including authors with missing details
      ✓ should return no more than 3 contributors if count provided is 3
      ✓ should return the correct commit details not including merge commits
      ✓ should return contributors in correct order
    requestPromise
debug headers:  {}
      ✓ should reject on a status code of >= 500
debug headers:  {}
      ✓ should reject on a status code of >= 400
debug headers:  {"content-type":"application/json"}
      ✓ should return the response body on a status code of 200
debug headers:  {"link":"<https://api.github.com/repositories/8231436/commits?since=2015-05-08>; rel=\"next\"","content-type":"application/json"}
      ✓ should return the response body and pagination url if available on a status code of 200
debug headers:  {}
      ✓ should reject if status code is 202 and retry is not enabled
debug headers:  {}
debug headers:  {"content-type":"application/json"}
      ✓ should retry if status code is 202 and retry is enabled (1840ms)

  jshint
    ✓ should pass for working directory (157ms)


  12 passing (2s)
  1 failing

  1) top-gh-contribs getPagination should follow pagination links:
     Uncaught TypeError: Cannot read property 'headers' of undefined
      at Request._callback (index.js:116:67)
      at self.callback (node_modules/request/request.js:200:22)
      at Request.onRequestError (node_modules/request/request.js:826:8)
      at node_modules/nock/lib/request_overrider.js:206:11



